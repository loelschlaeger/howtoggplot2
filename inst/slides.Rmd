---
title: "How to {ggplot2}"
author: "Lennart Oelschl&auml;ger"
date: '`r format(Sys.Date(),"%d.%m.%Y")`'
output: slidy_presentation
---
  
## Why and what 

Welcome to this tiny course on data visualization in R with [{ggplot2}](https://ggplot2.tidyverse.org/)! `r emo::ji("wave")`

### Why do we care?

Potentially, plots can [beautifully inform](https://en.wikipedia.org/wiki/Charles_Joseph_Minard#The_map_of_Napoleon's_Russian_campaign) or [horribly mislead](https://en.wikipedia.org/wiki/Misleading_graph#Truncated_graph). [Colors](https://michaelbach.de/ot) and [shape](http://vis.stanford.edu/files/2010-MTurk-CHI.pdf) matter! `r emo::ji("balance_scale")`

### Why {ggplot2}?

The {ggplot2} package implements a *grammar of graphics*, a series of distinct tasks to make a graphic.

### What is this course about?

Being in "decent control" of {ggplot2} to produce meaningful plots. 

### What do you need?

Basic R skills + a not-too-old version of R + RStudio

### My sources

- Healy (2019): [Data Visualization: A practical introduction](https://socviz.co/)
- Wickham (2016): [ggplot2: elegant graphics for data analysis](https://ggplot2-book.org/)
- Wilkinson (2005): The Grammar of Graphics
- [Tufte](https://en.wikipedia.org/wiki/Edward_Tufte) (1983): The Visual Display of Quantitative Information

### Found mistakes? Have suggestions?

I'm sure you have! Please leave a note [here](https://github.com/loelschlaeger/howtoggplot2/issues/new/choose). `r emo::ji("wish")`

## Our first plot

Load {ggplot2}.

```{r}
# install.packages(ggplot2)
library(ggplot2)
```

We need data, let's go with an excerpt from the famous [Gapminder dataset](https://www.gapminder.org/tools):

```{r}
# install.packages(gapminder)
library(gapminder)
head(gapminder)
str(gapminder)
```

First, we tell the `ggplot()` function what data we are using and what variables we wish to see on each axis:

```{r}
ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp)) 
```

Something is missing ... `r emo::ji("thinking")` We need an additional layer, a `geom_*` function!

```{r}
ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp)) +
  geom_point()
```

There are more of them which we can simply add (literally add!):

```{r, message=FALSE}
p <- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p <- p + geom_point() + geom_smooth()
p
```

As a last polishing step for now, we improve the x-axis scale and the plot labels.

```{r, message=FALSE}
p + scale_x_log10(labels = scales::dollar) +
  labs(x = "GDP per capita",
       y = "Life expectancy in years",
       title = "Economic growth as an indicator for life expectancy",
       subtitle = "Data points are country-years",
       caption = "Source: Gapminder")
```

Finally, we can use the `ggsave()` function to save our plot:

```{r, eval = FALSE}
ggsave("some_descriptive_name.pdf")
```

### Recap

1. Call `ggplot()`
2. Set `data = ...`
3. Set `mapping = aes(...)`
4. Add one (or more) `geom_*()` functions
5. Adjust the scale and labels

## It's your turn

This course includes tutorials! `r emo::ji("sunglasses")`

Executing the following lines gives you access to the course material:

```{r, eval = FALSE}
# install.packages("devtools")
devtools::install_github("loelschlaeger/howtoggplot2")
library(howtoggplot2)
```

To start the tutorial, type:

```{r, eval = FALSE}
tutorial()
```

To open a copy of these slides, type:

```{r, eval = FALSE}
slides()
```

To submit an issue on GitHub about this course, type:

```{r, eval = FALSE}
issue()
```